
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>pxtarget.json Manual Page | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/PXT/">
            PXT
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/PXT/">
              PXT
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/26/online-pxt-7/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/26/online-pxt-9/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/26/online-pxt-7/">
                    Accessibility
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/26/online-pxt-9/">
                    Defining blocks
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>pxtarget.json Manual Page</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月26日 09:05
  </p>
</div>
</div>



  
  <div class="page">
      <h1 id="pxtarget-json-Manual-Page"><a href="#pxtarget-json-Manual-Page" class="headerlink" title="pxtarget.json Manual Page"></a>pxtarget.json Manual Page</h1><p>A PXT target is described by a <code>pxtarget.json</code> JSON file.<br>Here are two examples of <code>pxtarget.json</code> files, one simple and one more complex:</p>
<ul>
<li><a href="https://github.com/Microsoft/pxt-sample/blob/master/pxtarget.json" target="_blank" rel="external">https://github.com/Microsoft/pxt-sample/blob/master/pxtarget.json</a></li>
<li><a href="https://github.com/Microsoft/pxt-microbit/blob/master/pxtarget.json" target="_blank" rel="external">https://github.com/Microsoft/pxt-microbit/blob/master/pxtarget.json</a></li>
</ul>
<p>The JSON file <code>pxtarget.json</code> is described at the top-level by the interfaces <code>TargetBundle</code><br>and <code>AppTarget</code>, shown below.<br>Fields labelled as “DERIVED” in the comments are populated by PXT from other sources,<br>as indicated. All other fields below are user-supplied. Optional fields have a “?” after their name. </p>
<p>All PXT targets also must supply an NPM <a href="https://docs.npmjs.com/files/package.json" target="_blank" rel="external">package.json</a><br>file, which describes the versioning, dependency and resources required to build the target.<br>You can find examples for pxt-sample and pxt-microbit here:</p>
<ul>
<li><a href="https://github.com/Microsoft/pxt-sample/blob/master/package.json" target="_blank" rel="external">https://github.com/Microsoft/pxt-sample/blob/master/package.json</a></li>
<li><a href="https://github.com/Microsoft/pxt-microbit/blob/master/package.json" target="_blank" rel="external">https://github.com/Microsoft/pxt-microbit/blob/master/package.json</a></li>
</ul>
<p>Here’s more about <a href="/target-creation">creating a target</a></p>
<h2 id="TargetBundle"><a href="#TargetBundle" class="headerlink" title="TargetBundle"></a>TargetBundle</h2><p>The interface <code>TargetBundle</code> describes the PXT packages that come bundled<br>with the target (as opposed to being pulled from the web), as well as the semantic<br>version of the target:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface TargetBundle extends AppTarget {
        versions: TargetVersions;       // DERIVED: defines the semantic versioning for the target
        bundleddirs: string[];          // packages to be bundled into web app (libs/*)
    }
</code></pre>
<h3 id="versions-TargetVersions"><a href="#versions-TargetVersions" class="headerlink" title="versions: TargetVersions"></a>versions: TargetVersions</h3><p>PXT uses <a href="http://semver.org/" target="_blank" rel="external">semantic versioning</a> of its targets and packages.  The TargetVersions<br>interface has two relevant fields that are populated as specified below:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface TargetVersions {
        target: string; // equal to version field in "package.json"
        pxt: string;    // equal to version field in "package.json" or "node_modules/pxt-core/package.json"
    }
</code></pre>
<h3 id="bundleddirs-string"><a href="#bundleddirs-string" class="headerlink" title="bundleddirs: string[]"></a>bundleddirs: string[]</h3><p>A target can use many packages in addition to the required “corepkg”. To<br>ensure that a package is bundled into the web app, you must include it in this list. For<br>example in <a href="http://github.com/microsoft/pxt-microbit/blob/master" target="_blank" rel="external">http://github.com/microsoft/pxt-microbit/blob/master</a>, we see:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    "bundleddirs": [
        "libs/core",
        "libs/radio",
        "libs/devices",
        "libs/bluetooth"
    ],
</code></pre>
<p>This ensures that the above four packages are compiled/bundled into the web app and delivered on the initial<br>download of the web app. Other packages for the micro:bit, such as <a href="http://github.com/microsoft/pxt-neopixel" target="_blank" rel="external">http://github.com/microsoft/pxt-neopixel</a><br>are not bundled and remain on github.com, where they are loaded as needed by the web app (usually<br>via an “Extensions” request by the end user).</p>
<h2 id="AppTarget"><a href="#AppTarget" class="headerlink" title="AppTarget"></a>AppTarget</h2><p>Most of the user-defined fields for <code>pxttarget.json</code> are described by the interface <code>AppTarget</code>.</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface AppTarget {
        id: string;             // unique id: should match ^[a-z]+$; used in URLs and domain names
        name: string;           // friendly name (spaces allowed)
        corepkg: string;        // specifies the directory (under libs/) for target's core APIs
                                // such libraries also are known as packages. See section below. 
        compile: CompileTarget; // see sections below for description
        appTheme: AppTheme;     // see sections below for description 

        nickname?: string;      // Friendly id (should match ^[a-zA-Z]+$); used when generating files, 
                                // folders, etc. defaults to id
        platformid?: string;    // Used as search term in GitHub search for packages; defaults to id

        title?: string;         // for HTML TITLE tag
        description?: string;   // for HTML META Description

        cloud?: AppCloud;       // see sections below for descriptions of the rest of the fields
        simulator?: AppSimulator;
        runtime?: RuntimeOptions;
        compileService?: TargetCompileService;
    }
</code></pre>
<h3 id="corepkg-string"><a href="#corepkg-string" class="headerlink" title="corepkg: string"></a>corepkg: string</h3><p>A target must have a core <a href="/packages">package</a> under the libs/ directory<br>where the core APIs for the target reside.<br>The core package should always be bundled with the web app, as shown below:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    "corepkg": "core",
    "bundleddirs": [
        "libs/core"
    ]
</code></pre>
<h3 id="compile-CompileTarget"><a href="#compile-CompileTarget" class="headerlink" title="compile: CompileTarget"></a>compile: CompileTarget</h3><p>PXT supports compilation to both JavaScript and ARM machine code (native). Web-only targets<br>will not need the native compilation path.</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface CompileTarget {
        isNative: boolean;      // false -> JavaScript compilation only, for simulator
        hasHex: boolean;        // output binary file (implies isNative)
        nativeType?: string;    // currently only "thumb", though there is a prototype for AVR

        // output file options
        useUF2?: boolean;       // true -> output UF2 format (see https://github.com/Microsoft/uf2), false -> HEX file
        hexMimeType?: string;   // Mime type for hex files 
        driveName?: string;     // how will the device appear when plugged in via MSD?
        deployDrives?: string;  // partial name of drives where the HEX/UF2 file should be copied

        // code generation options
        floatingPoint?: boolean; // use floating point in JavaScript (default is 32-bit integers)
        taggedInts?: boolean;    // true -> use tagged integers in native (implies floatingPoint)
        shortPointers?: boolean; // true -> 16 bit pointers
        flashCodeAlign?: number; // defaults to 1k page size
        flashChecksumAddr?: number;  // where to store checksum of code

        // advanced debugging options
        boxDebug?: boolean;     // generate debugging code for boxing
        jsRefCounting?: boolean;// generate debugging in JS for reference counting scheme
        openocdScript?: string;
    }
</code></pre>
<h3 id="appTheme-AppTheme"><a href="#appTheme-AppTheme" class="headerlink" title="appTheme: AppTheme"></a>appTheme: AppTheme</h3><p>PXT has a large number of options for controlling<br>the <a href="/targets/theming">look and feel</a> of a target.<br>Here is the appTheme from pxt-sample with some comments:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    "appTheme": {
        // URLs to use for various components of the UI
        "logoUrl": "https://microsoft.github.io/pxt-sample/",
        "homeUrl": "https://microsoft.github.io/pxt-sample/",
        "privacyUrl": "https://go.microsoft.com/fwlink/?LinkId=521839",
        "termsOfUseUrl": "https://go.microsoft.com/fwlink/?LinkID=206977",
        "betaUrl": "https://makecode.com/",
        // populating the (?) menu
        "docMenu": [
            {
                "name": "About",
                "path": "/about"
            },
            {
                "name": "Docs",
                "path": "/docs"
            }
        ],
        // enable toolbox for both Blockly and JavaScript
        "coloredToolbox": true,
        "monacoToolbox": true,
        "invertedMenu": true,
        "simAnimationEnter": "rotate in",
        "simAnimationExit": "rotate out"
    }
</code></pre>
<h3 id="cloud-AppCloud"><a href="#cloud-AppCloud" class="headerlink" title="cloud?: AppCloud"></a>cloud?: AppCloud</h3><p>PXT has a cloud backend that provides a set of services to the web app.  The services are configured using<br>the <code>cloud</code> field in pxttarget.json, defined by the <code>AppCloud</code> interface:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface AppCloud {
        sharing?: boolean;      // enable anonymous sharing of projects via URL
        importing?: boolean;    // enable import of a previously shared project from 
                                // a URL (requires sharing? and publishing?)

        packages?: boolean;           // enabled loading of packages (from github)
        preferredPackages?: string[]; // list of company/project(#tag) of packages on github
        githubPackages?: boolean;     // enable user-specified term for searching github for packages

        // to be retired soon
        publishing?: boolean;   // must set true for importing? to work; no other purpose evident
        embedding?: boolean;

        // not currently supported
        workspaces?: boolean;
    }
</code></pre>
<p>For example in the pxttarget.json for <a href="http://github.com/microsoft/pxt-microbit" target="_blank" rel="external">http://github.com/microsoft/pxt-microbit</a>, we see:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    "cloud": {
        "workspace": false,
        "packages": true,
        "sharing": true,
        "publishing": true,
        "preferredPackages": [
            "Microsoft/pxt-neopixel"
        ],
        "githubPackages": true
    }
</code></pre>
<h3 id="simulator-AppSimulator"><a href="#simulator-AppSimulator" class="headerlink" title="simulator?: AppSimulator;"></a>simulator?: AppSimulator;</h3><p>PXT provides a JavaScript-based simulation environment on the left side of the web<br>app (typically for physical computing devices like the micro:bit).  PXT uses the<br>term <a href="/targets/board">board</a> to refer to the main physical computing device shown in the simulator.<br>Each target has one board (plus optional parts).</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface AppSimulator {
        // define aspects of physical computing device
        boardDefinition?: BoardDefinition;
        // if true, boardDefinition comes from board package
        dynamicBoardDefinition?: boolean;

        // running and code changes
        autoRun?: boolean;          // automatically run program after a change to its code
        stopOnChange?: boolean;     // stop execution when user changes code
        headless?: boolean;         // whether simulator should still run while collapsed

        // buttons and parts
        hideRestart?: boolean;      // hide the restart button 
        hideFullscreen?: boolean;   // hide the fullscreen button
        parts?: boolean;            // parts enabled?
        instructions?: boolean;     // generate step-by-step wiring instructions (Make button)

        // appearance
        aspectRatio?: number;       // width / height
        partsAspectRatio?: number;  // aspect ratio of the simulator when parts are displayed

        // miscellaneous
        trustedUrls?: string[];     // URLs that are allowed in simulator modal messages
    }
</code></pre>
<p>The <code>boardDefinition</code> can be also defined in the <a href="/targets/board">core board package</a>.</p>
<h3 id="runtime-RuntimeOptions"><a href="#runtime-RuntimeOptions" class="headerlink" title="runtime?: RuntimeOptions;"></a>runtime?: RuntimeOptions;</h3><p>This severely misnamed option controls the available blocks in the Blockly editor:</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface RuntimeOptions {
        // control whether or not Blockly built-in categories appear
        mathBlocks?: boolean;       
        textBlocks?: boolean;
        listsBlocks?: boolean;
        variablesBlocks?: boolean;
        logicBlocks?: boolean;
        loopsBlocks?: boolean;

        // options specific to the special "on start" block
        onStartNamespace?: string; // default = loops
        onStartColor?: string;
        onStartWeight?: number;
        onStartUnDeletable?: boolean;
    }
</code></pre>
<h3 id="compileService-TargetCompileService"><a href="#compileService-TargetCompileService" class="headerlink" title="compileService?: TargetCompileService;"></a>compileService?: TargetCompileService;</h3><p>PXT provides a compile service for C/C++ code that may be included in a target/package.<br>Currently, this compile service can be configured<br>to use either <a href="https://www.mbed.com/en/platform/software/mbed-yotta/" target="_blank" rel="external">yotta</a><br>or <a href="http://platformio.org/" target="_blank" rel="external">platformio</a>.<br>PXT defaults to using local installs of yotta and platformio.<br>PXT expects to find the C/C++ sources on github.</p>
<pre class=" language-typescript-ignore"><code class="language-typescript-ignore">    interface TargetCompileService {
        buildEngine?: string;           // default is yotta, set to platformio
        // where are the sources
        githubCorePackage?: string;     // e.g. lancaster-university/microbit
        gittag: string;
        // yotta configuration
        yottaCorePackage?: string;      // name for PXT use
        yottaTarget?: string;           // name of yotta target to build
        yottaBinary?: string;           // name of yotta output file 
        yottaConfig?: any;              // additional config
        // platformio configuration
        platformioIni?: string[];       // define contents of platformio.ini file

        serviceId: string;
    }
</code></pre>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/26/online-pxt-7/">« Accessibil...</a></span>
  <span class="right"><a href="/2018/05/26/online-pxt-9/">Defining b... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月26日 09:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-pxt-8
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

