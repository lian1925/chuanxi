
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" type="image/png" href="/img/sand2.png">
  <link rel="shortcut icon" type="image/x-icon" href="/img/sand2.png">
  <meta property="og:image" content="https://assets-cdn.github.com/images/modules/open_graph/github-octocat.png">
  
  <link rel="stylesheet" href="/css/style.css?v=1.3"> 
  <link href="//vjs.zencdn.net/6.7/video-js.min.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/6.7/video.min.js"></script>
  
  <title>Components【组件】 and Props | 小沙丘的网络漫游记</title>
 <meta name="description" content="" >

 <!-- 百度统计 -->
 <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?eafa0040e1ab3bed28ce82ef03de6e01";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
  
<link rel="stylesheet" href="/css/prism-ghcolors.css" type="text/css"></head>
<body>
  
  <script>
      if (/mobile/i.test(navigator.userAgent) || /android/i.test(navigator.userAgent)){
        document.body.classList.add('mobile');            
      } else{
        document.body.classList.add('pc');
        document.getElementsByTagName("html")[0].style.fontSize="62.5%";
      }
      var u = navigator.userAgent;
var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
if(isiOS){
  document.body.classList.add('ios');
  document.getElementsByTagName("html")[0].style.fontSize="65%";
           
}
    </script>

  <div class="container">
<!-- 用于文章页面的顶部，提供返回主页和主题页的按键 -->
<!-- 头部开始 -->

<div id="header">
    <p>小沙丘的网络漫游记
      <span> » 
        <a href="/home/">首页</a>
      </span>
      
      <span> » 
          <a href="/tags/React/">
            React
          </a>
      </span>
      
    </p>
</div>

<!-- 头部结束 -->



<!-- 分类组件，放置于文章页面的顶部，提供上(或下)一篇导航按键。 -->
<div class="asset-nav">
    <div class="entry-categories">
      <p>主题：
        <span> 
            <a href="/tags/React/">
              React
            </a>
        </span>
      </p>
    </div>
    <div class="entry-location-mobile">
        <span>
            
            <a href="/2018/05/23/online-react-3/">
            &#8676;
            </a>
        </span>
        <span>
            
            <a href="/2018/05/23/online-react-5/">
              &#8677;
            </a>
        </span>
    </div>
    <div class="entry-location">
        <P>上一篇：
                <a href="/2018/05/23/online-react-3/">
                    rendering【渲染】elements【元素】
                </a>
        </P>
        <P>下一篇：

                <a href="/2018/05/23/online-react-5/">
                    State【状态】 and Lifecycle【生命周期】
                </a>
        </P>
    </div>
</div>

<div class="post">
<div class="title-post">
<h1>Components【组件】 and Props</h1>
<div class="post-meta">
  <p>作者： Lian</p>
  <p>日期：
    2018年05月23日 18:05
  </p>
</div>
</div>



  
  <div class="page">
      <p>Components let you split【分离】 the UI into independent【独立】, reusable【可复用】 pieces【部分】, and think about each piece in isolation【独立】.</p>
<p>Conceptually【概念上】, components are like JavaScript functions. They accept arbitrary【任意】 inputs (called “props”) and return React elements describing【描述】 what should appear【出现】 on the screen.</p>
<h2 id="Functional【函数】-and-Class【类】-Components"><a href="#Functional【函数】-and-Class【类】-Components" class="headerlink" title="Functional【函数】 and Class【类】 Components"></a>Functional【函数】 and Class【类】 Components</h2><p>The simplest【最简单】 way【方式】 to define【定义】 a component【组件】 is to write【编写】 a JavaScript function:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This function【函数】 is a valid【有效】 React component【组件】 because it accepts a single【单一】 “props” (which stands for【代表】 properties【属性】) object argument with data and returns a React element【元素】. We call such components “functional” because they are literally【字面量】 JavaScript functions.</p>
<p>You can also use an <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes" target="_blank" rel="external">ES6 class</a> to define【定义】 a component:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The above two components are equivalent【等效】 from React’s point of view.</p>
<p>Classes have some additional【额外】 features【特性】 that we will discuss【讨论】 in the <a href="/docs/state-and-lifecycle.html">next sections</a>. Until then, we will use functional components for their conciseness【简洁】.</p>
<h2 id="Rendering【渲染】-a-Component"><a href="#Rendering【渲染】-a-Component" class="headerlink" title="Rendering【渲染】 a Component"></a>Rendering【渲染】 a Component</h2><p>Previously, we only encountered【鼓励】 React elements that represent DOM tags:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
</code></pre>
<p>However, elements can also represent【表现】 user-defined components:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token operator">&lt;</span>Welcome name<span class="token operator">=</span><span class="token string">"Sara"</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
</code></pre>
<p>When React sees an element representing a user-defined component【组件】, it passes【传递】 JSX attributes【属性】 to this component as a single object【对象】. We call this object “props”.</p>
<p>For example, this code renders【渲染】 “Hello, Sara” on the page【页面】:</p>
<pre class=" language-js{1,5}"><code class="language-js{1,5}">function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

const element = <Welcome name="Sara" />;
ReactDOM.render(
  element,
  document.getElementById('root')
);
</code></pre>
<p><a href="codepen://components-and-props/rendering-a-component" target="_blank" rel="external"></a>.</p>
<p>Let’s recap【概括】 what happens in this example:</p>
<ol>
<li>We call <code>ReactDOM.render()</code> with the <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code> element.</li>
<li>React calls the <code>Welcome</code> component with <code>{name: &#39;Sara&#39;}</code> as the props.</li>
<li>Our <code>Welcome</code> component returns a <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> element as the result.</li>
<li>React DOM efficiently updates the DOM to match <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>.</li>
</ol>
<blockquote>
<p><strong>Note【注意】:</strong> Always start component names【名称】 with a capital【大写】 letter.</p>
<p>React treats components starting with lowercase【小写】 letters as DOM tags【标签】. For example, <code>&lt;div /&gt;</code> represents an HTML div tag, but <code>&lt;Welcome /&gt;</code> represents a component and requires <code>Welcome</code> to be in scope【范围】.</p>
<p>You can read more about the reasoning【理由】 behind this convention【约定】 <a href="/docs/jsx-in-depth.html#user-defined-components-must-be-capitalized">here.</a></p>
</blockquote>
<h2 id="Composing【组合】-Components"><a href="#Composing【组合】-Components" class="headerlink" title="Composing【组合】 Components"></a>Composing【组合】 Components</h2><p>Components can refer to other components in their output【输出】. This lets us use the same【相同】 component abstraction【抽象】 for any level of detail【细节】. A button, a form, a dialog, a screen: in React apps, all those are commonly expressed【表示】 as components【组件】.</p>
<p>For example, we can create an <code>App</code> component that renders【渲染】 <code>Welcome</code> many times【多次】:</p>
<pre class=" language-js{8-10}"><code class="language-js{8-10}">function Welcome(props) {
  return <h1>Hello, {props.name}</h1>;
}

function App() {
  return (
    <div>
      <Welcome name="Sara" />
      <Welcome name="Cahal" />
      <Welcome name="Edite" />
    </div>
  );
}

ReactDOM.render(
  <App />,
  document.getElementById('root')
);
</code></pre>
<p><a href="codepen://components-and-props/composing-components" target="_blank" rel="external"></a>.</p>
<p>Typically, new React apps have a single【单一】 <code>App</code> component at the very top【顶层】. However, if you integrate【整合】 React into an existing【已存在】 app, you might start bottom-up with a small【小】 component like <code>Button</code> and gradually【逐步】 work your way to the top【顶层】 of the view hierarchy【层次】.</p>
<h2 id="Extracting【提取】-Components"><a href="#Extracting【提取】-Components" class="headerlink" title="Extracting【提取】 Components"></a>Extracting【提取】 Components</h2><p>Don’t be afraid to split【分离】 components into smaller【更小】 components.</p>
<p>For example, consider【考虑】 this <code>Comment</code> component:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">Comment</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"Comment"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"UserInfo"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>img className<span class="token operator">=</span><span class="token string">"Avatar"</span>
          src<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>author<span class="token punctuation">.</span>avatarUrl<span class="token punctuation">}</span>
          alt<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"UserInfo-name"</span><span class="token operator">></span>
          <span class="token punctuation">{</span>props<span class="token punctuation">.</span>author<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"Comment-text"</span><span class="token operator">></span>
        <span class="token punctuation">{</span>props<span class="token punctuation">.</span>text<span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"Comment-date"</span><span class="token operator">></span>
        <span class="token punctuation">{</span><span class="token function">formatDate</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><a href="codepen://components-and-props/extracting-components" target="_blank" rel="external"></a>.</p>
<p>It accepts【接收】 <code>author</code> (an object), <code>text</code> (a string), and <code>date</code> (a date) as props, and describes【描述】 a comment on a social【社会化】 media【媒体】 website.</p>
<p>This component can be tricky to change【改变】 because of all the nesting【嵌套】, and it is also hard【难以】 to reuse【复用】 individual parts of it. Let’s extract【提取】 a few components from it.</p>
<p>First, we will extract【提取】 <code>Avatar</code>:</p>
<pre class=" language-js{3-6}"><code class="language-js{3-6}">function Avatar(props) {
  return (
    <img className="Avatar"
      src={props.user.avatarUrl}
      alt={props.user.name}
    />
  );
}
</code></pre>
<p>The <code>Avatar</code> doesn’t need to【不需要】 know that it is being rendered【渲染】 inside【内部】 a <code>Comment</code>. This is why【为什么】 we have given its prop a more generic【一般】 name: <code>user</code> rather than <code>author</code>.</p>
<p>We recommend【推荐】 naming props from the component’s own point【视角】 of view rather than the context in which it is being used.</p>
<p>We can now simplify【简化】 <code>Comment</code> a tiny bit:</p>
<pre class=" language-js{5}"><code class="language-js{5}">function Comment(props) {
  return (
    <div className="Comment">
      <div className="UserInfo">
        <Avatar user={props.author} />
        <div className="UserInfo-name">
          {props.author.name}
        </div>
      </div>
      <div className="Comment-text">
        {props.text}
      </div>
      <div className="Comment-date">
        {formatDate(props.date)}
      </div>
    </div>
  );
}
</code></pre>
<p>Next, we will extract【提取】 a <code>UserInfo</code> component that renders an <code>Avatar</code> next to the user’s name:</p>
<pre class=" language-js{3-8}"><code class="language-js{3-8}">function UserInfo(props) {
  return (
    <div className="UserInfo">
      <Avatar user={props.user} />
      <div className="UserInfo-name">
        {props.user.name}
      </div>
    </div>
  );
}
</code></pre>
<p>This lets us simplify <code>Comment</code> even further【更远】:</p>
<pre class=" language-js{4}"><code class="language-js{4}">function Comment(props) {
  return (
    <div className="Comment">
      <UserInfo user={props.author} />
      <div className="Comment-text">
        {props.text}
      </div>
      <div className="Comment-date">
        {formatDate(props.date)}
      </div>
    </div>
  );
}
</code></pre>
<p><a href="codepen://components-and-props/extracting-components-continued" target="_blank" rel="external"></a>.</p>
<p>Extracting components might【可能】 seem like grunt【大量】 work at first, but having a palette【调色板】 of reusable components pays off in larger【大型】 apps. A good rule【规则】 of thumb is that if a part of your UI is used several times【多次】 (<code>Button</code>, <code>Panel</code>, <code>Avatar</code>), or is complex【足够复杂】 enough on its own (<code>App</code>, <code>FeedStory</code>, <code>Comment</code>), it is a good candidate【候选者】 to be a reusable component.</p>
<h2 id="Props-are-Read-Only【只读】"><a href="#Props-are-Read-Only【只读】" class="headerlink" title="Props are Read-Only【只读】"></a>Props are Read-Only【只读】</h2><p>Whether you declare【声明】 a component <a href="#functional-and-class-components">as a function or a class</a>, it must never modify【修改】 its own props. Consider this <code>sum</code> function:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Such functions【函数】 are called <a href="https://en.wikipedia.org/wiki/Pure_function" target="_blank" rel="external">“pure”</a> because they do not attempt to【试图】 change【改变】 their inputs, and always return the same result for the same inputs.</p>
<p>In contrast【相反】, this function is impure【不纯洁】 because it changes its own input:</p>
<pre class=" language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">withdraw</span><span class="token punctuation">(</span>account<span class="token punctuation">,</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  account<span class="token punctuation">.</span>total <span class="token operator">-</span><span class="token operator">=</span> amount<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>React is pretty flexible【灵活】 but it has a single strict【严格】 rule:</p>
<p><strong>All React components must act like pure【纯洁】 functions with respect to their props.</strong></p>
<p>Of course, application UIs are dynamic【动态】 and change over time. In the <a href="/docs/state-and-lifecycle.html">next section</a>, we will introduce a new concept【概念】 of “state”. State allows React components to change【改变】 their output over time in response to user actions【行为】, network responses【响应】, and anything else, without violating【违反】 this rule.</p>

  </div>
</div>


<p class="nav-foot">
  <span class="left"><a href="/2018/05/23/online-react-3/">« rendering【...</a></span>
  <span class="right"><a href="/2018/05/23/online-react-5/">State【状态】 ... »</a></span>
</p>

<!-- 文档信息 -->
<div class="post-foot">
  <h3>文档信息</h3>
  <ul>
    <li>版权声明：自由转载-非商用-非衍生-保持署名（
      <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh">创意共享3.0许可证</a>）
    </li>
    <li>作者：<a href="/">Lian</a></li>
    <li>日期：2018年05月23日 18:05</li>
    <li>邮箱：lian1925@126.com</li>
  </ul>
</div>
      




<div class="content-comment">
  <h2>留言</h2>
  
  
		
</div>

<!-- 评论输入组件，填写数据：留言，称呼，电子邮件 -->

<div class="form-comment">
  <h2>
		我要发表看法
	</h2>

	<form method="post" 
	target="targetIfr"
	action="">
	 <!-- 留言正文 -->
	 
		
<p>
	<label for="comment-content">
		您的留言:
	</label>
</p>

<p>
	<textarea 
	id="comment-content" 
	name="content" 
	rows="10" cols="50">
	</textarea>
</p>

		<!-- 姓名 -->
	 
		
<p>
	<label for="comment-author">
		您的大名:
	</label>
</p>

<p>
	<input 
	id="comment-author" 
	name="author" 
	size="30" 
	value=""
	pattern="^.{2,150}$"
	required
	>
	<span class="hint">
			 «-必填
	</span
</p>


		<!-- 微信 -->
	 
		
<p>
	<label for="comment-wechat">
		您的微信:
	</label>
</p>

<p>
	<input 
	id="comment-wechat" 
	name="wechat" 
	size="30" 
	value=""
	pattern="^[a-zA-Zd_]{5,}$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		<!-- 电子邮箱 -->
		
		
<p>
	<label for="comment-email">
		电子邮箱：
	</label>
</p>

<p>
	<input 
	id="comment-email" 
	name="email" 
	size="30" 
	value=""
	pattern="^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$"
	
	>
	<span class="hint">
			 «-选填，不公开
	</span
</p>


		
		<p>

		
<div class="button">
    <input 
    class="submit-button" 
    onclick="doButton('addComment')"
    value="发表">
    <span class="hint"> «- 点击按钮</span>
</div>
		</p>
	</form>
	<iframe name="targetIfr" style="display:none"></iframe> 
</div>


<!-- data:{
	name:'',
	type:'passwor',
	label:'您的大名',
	hint:'',
	pattern:'[A-z]{3}',
	required:"required"
} -->


<p id="info-meta" style="display:none;">
  online-react-4
</p>


<p id="info-url" style="display:none;">
  
</p>

<div class="footer">
  Copyright @ <a href="/">lian</a> | 2009-2018
</div>

</div>

<script src="/js/jquery.js"></script>
<script src="/js/APlayer.min.js"></script>
<script src="/js/post.js"></script>

</body>

</html>

